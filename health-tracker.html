<section class="health-tracker">
    <div class="container">
        <h2 class="text-center">Personal Health Tracker</h2>
        
        <div class="text-center mb-4">
            <a href="health_tracker.html" class="btn btn-primary">Go to Health Tracker</a>
        </div>
        
        <div class="row">
            <!-- Journal Entry Form -->
            <div class="col-md-6">
                <div class="card">
                    <div class="card-body">
                        <h4>Daily Journal</h4>
                        <form id="healthJournalForm">
                            <div class="mb-3">
                                <label for="journalDate" class="form-label">Date</label>
                                <input type="date" id="journalDate" class="form-control" required>
                            </div>
                            <div class="mb-3">
                                <label for="mood" class="form-label">Mood</label>
                                <select id="mood" class="form-control">
                                    <option>Happy</option>
                                    <option>Neutral</option>
                                    <option>Sad</option>
                                    <option>Anxious</option>
                                    <option>Tired</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="notes" class="form-label">Notes</label>
                                <textarea id="notes" class="form-control" rows="4" placeholder="Write about your health today..."></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary">Save Entry</button>
                        </form>
                    </div>
                </div>
            </div>
            
            <!-- Graphs Section -->
            <div class="col-md-6">
                <div class="card">
                    <div class="card-body">
                        <h4>Health Trends</h4>
                        <canvas id="moodChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Journal Entries List -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-body">
                        <h4>Past Entries</h4>
                        <ul id="journalEntries" class="list-group">
                            <!-- Entries will be displayed here dynamically -->
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", () => {
        const journalForm = document.getElementById("healthJournalForm");
        const journalEntries = document.getElementById("journalEntries");
        let journalData = JSON.parse(localStorage.getItem("journalData")) || [];

        journalForm.addEventListener("submit", (event) => {
            event.preventDefault();
            
            const date = document.getElementById("journalDate").value;
            const mood = document.getElementById("mood").value;
            const notes = document.getElementById("notes").value;
            
            const entry = { date, mood, notes };
            journalData.push(entry);
            localStorage.setItem("journalData", JSON.stringify(journalData));
            updateJournalEntries();
            updateChart();
        });

        function updateJournalEntries() {
            journalEntries.innerHTML = "";
            journalData.forEach((entry, index) => {
                const listItem = document.createElement("li");
                listItem.classList.add("list-group-item");
                listItem.innerHTML = `<strong>${entry.date}</strong> - ${entry.mood} <br> ${entry.notes}`;
                journalEntries.appendChild(listItem);
            });
        }

        function updateChart() {
            const moodCounts = {};
            journalData.forEach(entry => {
                moodCounts[entry.mood] = (moodCounts[entry.mood] || 0) + 1;
            });

            const ctx = document.getElementById("moodChart").getContext("2d");
            new Chart(ctx, {
                type: "pie",
                data: {
                    labels: Object.keys(moodCounts),
                    datasets: [{
                        data: Object.values(moodCounts),
                        backgroundColor: ["#FF6384", "#36A2EB", "#FFCE56", "#4BC0C0", "#9966FF"],
                    }]
                }
            });
        }

        updateJournalEntries();
        updateChart();
    });
</script>
